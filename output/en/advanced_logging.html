<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Xibo Documentation</title>
        <meta name="viewport" content="width=device-width">
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

        <!-- favicon -->
        <link href="../img/favicon.ico" rel="shortcut icon"/>

        <!-- Bootstrap -->
        <link href="../vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet" media="screen">
        
        <!-- Stylesheets -->
        <link href="../manual.css" rel="stylesheet" media="screen">
        
        <!-- META -->
        <meta name="keywords" content="digital signage, signage, narrow-casting, captivad, open source, agpl, documentation" />
        <meta name="description" content="Captivad is an open source digital signage solution. It supports all main media types and can be interfaced to other sources of data using CSV, Databases or RSS." />
    </head>
    <body data-toc="advanced">
        
        <nav id="top-nav" class="navbar navbar-inverse navbar-fixed-top" role="navigation">
            <div class="container">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#ss-navbar">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a href="#" class="navbar-brand">Xibo Documentation</a>
                </div>
            
                <div class="collapse navbar-collapse" id="ss-navbar">
                    <ul class="nav navbar-nav">

                    </ul>
                </div>
            </div>
        </nav>

        <div class="ss_body container">
            <div class="row">
                <div class="col-md-3">
                    <ul id="side-nav" class="nav nav-pills nav-stacked">
                        <!-- <li><a href="index.html" data-toc-name="getting_started">Getting Started</a></li> -->
<li><a href="index.html" data-toc-name="tour">Tour</a></li><li><a href="displays.html" data-toc-name="displays">Displays</a></li><li><a href="layouts.html" data-toc-name="layouts">Layouts</a></li><li><a href="media.html" data-toc-name="media">Library</a></li><li><a href="scheduling.html" data-toc-name="scheduling">Scheduling</a></li><li><a href="users.html" data-toc-name="users">Users</a></li><li><a href="advanced.html" data-toc-name="advanced">Advanced</a></li><!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body><ul>
<li><a href="advanced.html">Overview</a></li>
<li><a href="advanced_contributing.html">Contributing</a></li>
<li><a href="xtr.html">XTR - Routine Tasks</a></li>
<li><a href="xmr.html">XMR - Push Messaging</a></li>
<li><a href="api.html">API</a></li>
<li><a href="advanced_theme.html">Themes</a></li>
<li><a href="advanced_extending.html">Extending</a></li>
<li><a href="advanced_modules.html">Modules</a></li>
<li><a href="advanced_events.html">Events</a></li>
<li><a href="advanced_dateFormat.html">Date Format</a></li>
<li class="active"><a href="advanced_logging.html">Logging<span class="glyphicon glyphicon-arrow-left you-are-here-arrow"></span></a></li>
</ul></body></html>

                    </ul>
                </div>
                <div class="col-md-9" role="main">
                    <!--toc=advanced-->
<h1 id="logging">Logging <a href="#logging" class="header-link"></a></h1>
<p>The CMS has a central repository for all log information, including the Players which send
back log information with each collection from CMS.</p>
<p>The log is split into <em>channels</em>, <em>functions</em> and <em>pages</em> for easy searching. Each unique request
has a <em>runNo</em> to group messages together.</p>
<p>The log is accessible from the <em>Log</em> page in the CMS administration portal. </p>
<h2 id="fields">Fields <a href="#fields" class="header-link"></a></h2>
<table>
<thead>
<tr>
<th>Field</th>
<th>Explanation</th>
</tr>
</thead>
<tbody>
<tr>
<td>ID</td>
<td>A sequential ID of log messages</td>
</tr>
<tr>
<td>Run</td>
<td>The <em>run</em> identifier used to group messages generated by a single request</td>
</tr>
<tr>
<td>Date</td>
<td>The CMS date of the message</td>
</tr>
<tr>
<td>Channel</td>
<td>The Channel that the message relates to.</td>
</tr>
<tr>
<td>Function</td>
<td>The HTTP verb used in the request the generated the message, GET, POST, PUT, DELETE, HEAD.</td>
</tr>
<tr>
<td>Level</td>
<td>The severity of log message</td>
</tr>
<tr>
<td>Display</td>
<td>The display name, if the log message came from a Player</td>
</tr>
<tr>
<td>Page</td>
<td>The page requested - usually the route</td>
</tr>
<tr>
<td>Message</td>
<td>The log message</td>
</tr>
</tbody>
</table>
<h2 id="channels">Channels <a href="#channels" class="header-link"></a></h2>
<table>
<thead>
<tr>
<th>Channel</th>
<th>Explanation</th>
</tr>
</thead>
<tbody>
<tr>
<td>WEB</td>
<td>The CMS Web Portal</td>
</tr>
<tr>
<td>API</td>
<td>The CMS API</td>
</tr>
<tr>
<td>XMDS</td>
<td>The CMS/Player API (Media Distribution)</td>
</tr>
<tr>
<td>AUTH</td>
<td>The oauth authorization server for the API</td>
</tr>
<tr>
<td>CONSOLE</td>
<td>XTR task running</td>
</tr>
</tbody>
</table>
<h2 id="finding_your_message">Finding your message <a href="#finding_your_message" class="header-link"></a></h2>
<p>Understanding the log can be complicated in a busy system and it can often be hard to find messages
related to your interest. The log can be filtered for this purpose, it is usually best to start with
the Channel, then the Function and finally (if necessary) the page.</p>
<p>For example, if an API call to the statistics search function is not working as expected the log can
be searched for API, GET and <code>/stats</code>.</p>
<h2 id="log_location">Log location <a href="#log_location" class="header-link"></a></h2>
<p>The default log location is the database which can be viewed from the CMS log page. It may be desirable
to log to a different location, depending on your use case.</p>
<p>The CMS supports adding new log handlers that confirm to the PSR log handler format - we recommend
Monolog. To add log handlers simply append to the <code>$logHandlers</code> array in <code>settings.php</code>.</p>
<p>For example to add a file log handler:</p>
<pre><code>$logHandlers = [new \Monolog\Handler\StreamHandler(PROJECT_ROOT . '/log.txt')];</code></pre>
                </div>
            </div>
        </div> <!-- container-->
        <footer class="ss_footer" role="contentinfo">
            <div class="container">
                <div class="pull-right">
                    <img class="img-responsive logo" src="../img/logo.png" alt="Captivad" />
                </div>

                <p class="ss_back_to_top">Back to Top</p>

                <p>Designed and built by <a href="http://springsignage.com/">Spring Signage</a> for the <a href="http://www.xibo.org.uk" target="_blank">Xibo Project</a>.</p>
                <p>Open Source Code licensed under <a href="" target="_blank">GNU Affero General Public License v3 or later</a>, documentation under <a rel="license" href="http://creativecommons.org/licenses/by-sa/2.0/uk/" target="_blank">Creative Commons Licence</a>.</p>

                <p class="ss_footer_links">Currently v1.8.4</p>

                <p class="ss_languages"><a href="../en/index.html">en</a> | <a href="../fr/index.html">fr</a></p>
            </div>
        </footer>

        <!-- JavaScript -->
        <script src="../vendor/jquery/jquery-1.9.1.js"></script>
        <script src="../vendor/bootstrap/js/bootstrap.min.js"></script>
        <script type="text/javascript">
            $(document).ready(function() {
                $(".ss_body img").addClass("img-thumbnail");
                $(".ss_body table").addClass("table");

                // Set the selected page based on the TOC name
                // Mark the appropriate top nav element as the selected page
                $("#side-nav a").each(function() {
                    if ($(this).data().tocName == $("body").data().toc)
                        $(this).parent().addClass("active");
                });

                $(".ss_back_to_top").click(function() {
                    $('html, body').animate({scrollTop : 0},800);
                });

                if (inIframe()) {
                    console.log("In Frame");
                    $("#top-nav").css("display", "none");
                    $(".ss-sidebar").parent().css("display", "none");
                }
            });

            function inIframe () {
                try {
                    return window.self !== window.top;
                } catch (e) {
                    return true;
                }
            }
        </script>
    </body>
</html>
