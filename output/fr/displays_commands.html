<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Xibo Documentation</title>
        <meta name="viewport" content="width=device-width">
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

        <!-- favicon -->
        <link href="../img/favicon.ico" rel="shortcut icon"/>

        <!-- Bootstrap -->
        <link href="../vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet" media="screen">
        
        <!-- Stylesheets -->
        <link href="../manual.css" rel="stylesheet" media="screen">
        
        <!-- META -->
        <meta name="keywords" content="digital signage, signage, narrow-casting, xibo, open source, agpl, documentation" />
        <meta name="description" content="Xibo is an open source digital signage solution. It supports all main media types and can be interfaced to other sources of data using CSV, Databases or RSS." />
    </head>
    <body data-toc="displays">
        <!-- Copyright 2006-2013 Daniel Garner. Part of the Xibo Open Source Digital Signage Solution. Released under the AGPLv3 or later. -->
        <nav id="top-nav" class="navbar navbar-inverse navbar-fixed-top" role="navigation">
            <div class="container">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#ss-navbar">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a href="#" class="navbar-brand">Xibo Documentation</a>
                </div>
            
                <div class="collapse navbar-collapse" id="ss-navbar">
                    <ul class="nav navbar-nav">

                    </ul>
                </div>
            </div>
        </nav>

        <div class="ss_body container">
            <div class="row">
                <div class="col-md-3">
                    <ul id="side-nav" class="nav nav-pills nav-stacked">
                        <!-- <li><a href="index.html" data-toc-name="getting_started">Getting Started</a></li> -->
<li><a href="index.html" data-toc-name="tour">Tour</a></li><li><a href="displays.html" data-toc-name="displays">Displays</a></li><!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body><ul>
<li><a href="displays.html">Introduction</a></li>
<li><a href="displays_settings.html">Settings</a></li>
<li><a href="displays_metrics.html">Metrics</a></li>
<li><a href="displays_groups.html">Groups</a></li>
<li><a href="displays_wakeonlan.html">Wake on LAN</a></li>
<li><a href="displays_fileassociations.html">File Assignments</a></li>
<li><a href="displays_layoutassignments.html">Layout Assignments</a></li>
<li class="active"><a href="displays_commands.html">Commands<span class="glyphicon glyphicon-arrow-left you-are-here-arrow"></span></a></li>
</ul></body></html>
<li><a href="layouts.html" data-toc-name="layouts">Layouts</a></li><li><a href="media.html" data-toc-name="media">Library</a></li><li><a href="scheduling.html" data-toc-name="scheduling">Scheduling</a></li><li><a href="users.html" data-toc-name="users">Users</a></li><li><a href="advanced.html" data-toc-name="advanced">Advanced</a></li>
                    </ul>
                </div>
                <div class="col-md-9" role="main">
                    <!--toc=displays-->
<h1 id="commands">Commands <a href="#commands" class="header-link"><span class="glyphicon glyphicon-link"></span></a></h1>
<p>The commands functionality in Xibo is used to configure a set of predefined commands which can have a different
command string per player. This is particularly useful if the network of players is mixed between Windows/Android or even
if the players are slightly different hardware or connected to different displays.</p>
<p>A command record is created with a name, description and unique command code. The command string is then entered on a
display settings profile. All displays with that profile will then use the command string whenever they are asked to
execute a particular command.</p>
<p>This 2-stage approach means that the same commands can be scheduled across multiple
player types (be they different operating systems, have difference LCD panels connected, etc).</p>
<p>Commands also provide easy access to functionality such as RS232, Android Intents, etc.</p>
<h2 id="configuring_a_command">Configuring a command <a href="#configuring_a_command" class="header-link"><span class="glyphicon glyphicon-link"></span></a></h2>
<p>Commands are configured in 2 steps:</p>
<ol>
<li>Create the Command</li>
<li>Configure the Command string per Display Profile</li>
</ol>
<p>This allows a generic command to be created which can be used in a schedule, executed via XMR or used in a Layout. The
command can be used <strong>across different types of players</strong> as the command string is created in the Display Settings
Profile.</p>
<p>For example, imagine a mixed network of Windows and Android players and a command called &quot;Reboot&quot;. The command string
for reboot on windows is <code>shutdown /r now</code>, on android it is <code>reboot</code>.</p>
<p>The same can also be useful with a non-mixed network - imagine a network of Windows players with different monitors
connected over HDMI/RS232. A single command called &quot;Monitor On&quot; can be created and the different brands of monitor can
be represented by different display settings profiles, and each can have a different command string to turn the
monitor on/off.</p>
<p>Step 1 is done on the <strong>Commands</strong> page.</p>
<p><img src="../en/img/displays_commands_page.png" alt="Commands" /></p>
<p>The usual CMS functionality to add/edit and delete commands is provided.</p>
<p>Step 2 is done on the Display Profile Edit form under the Commands tab:</p>
<p><img src="../en/img/displayprofile_commands_tab.png" alt="Display Profile Edit Commands Tab" /></p>
<p>For each command a <em>command</em> and <em>validation</em> can be specified.</p>
<h4>Command</h4>
<p>The command string represents the final executed command and can be a direct call to the shell or can have a <em>helper</em>
specified. See below.</p>
<h4>Validation</h4>
<p>The validation string is used as a comparison to the command output and if it matches then the command is considered a
success. This string can be a regular expression.</p>
<h2 id="scheduling">Scheduling <a href="#scheduling" class="header-link"><span class="glyphicon glyphicon-link"></span></a></h2>
<p>Commands can be scheduled using the standard Schedule Page by selecting the <em>command</em> event type when adding/editing a
schedule.</p>
<p>Scheduled commands are executed once on the Player and only require a From Date.
The command can be executed up to 10 seconds after the from date selected.</p>
<h2 id="use_on_shell_commands">Use on Shell Commands <a href="#use_on_shell_commands" class="header-link"><span class="glyphicon glyphicon-link"></span></a></h2>
<p>Commands can be selected when adding a Shell Command Widget to a Layout. Shell
Commands with a Command as their source act in the same fashion as normal
shell commands. They should usually be used in a region on their own so they
are executed only once each time the Layout is shown.</p>
<p><a id="helpers"></a></p>
<h2 id="helpers">Helpers <a href="#helpers" class="header-link"><span class="glyphicon glyphicon-link"></span></a></h2>
<p>Command Helpers are prefixes that can be added to the command string in order to
take a more advanced action. Commands without a prefix are executed in the
shell of the operating system which runs the Player. <code>cmd.exe</code> on Windows and
<code>shell</code> on Android.</p>
<h4>RS232</h4>
<p>RS232 commands can be executed on Players by using the <code>rs232</code> prefix in
the command string. The format of the command is <code>rs232|&lt;connection string&gt;|&lt;command&gt;</code>.</p>
<p>The connection string should be provided in the following format on Windows:</p>
<pre><code class="language-bash">&lt;COM#&gt;,&lt;Baud Rate&gt;,&lt;Data Bits&gt;,&lt;Parity|None,Odd,Even,Mark,Space&gt;,&lt;StopBits|None,One,Two,OnePointFive&gt;,&lt;Handshake|None,XOnXOff,RequestToSend,RequestToSendXOnXOff&gt;,&lt;HexSupport|0,1,default 0&gt;</code></pre>
<p>Please note, if you need to send your command in HEX format, you should specify the byte string in the command string,
for example: <code>7E 00 00 FF 00 00 00 00 00 00 00 00 00 00 00 00 00 FF</code>, this will be converted to a byte stream by the
player. You will need to set the <code>HexSupport</code> element of the connection string to <code>1</code>.</p>
<p>The connection string should be provided in the following format on Android:</p>
<pre><code class="language-bash">&lt;DeviceName&gt;,&lt;Baud Rate&gt;,&lt;Data Bits&gt;,&lt;Parity&gt;,&lt;StopBits&gt;,&lt;FlowControl&gt;</code></pre>
<p>Each setting is represented by a corresponding number:</p>
<pre><code>DATA_BITS_5 = 5;
DATA_BITS_6 = 6;
DATA_BITS_7 = 7;
DATA_BITS_8 = 8;
PARITY_NONE = 0;
PARITY_ODD = 1;
PARITY_EVEN = 2;
PARITY_MARK = 3;
PARITY_SPACE = 4;
STOP_BITS_1 = 1;
STOP_BITS_15 = 3;
STOP_BITS_2 = 2;
FLOW_CONTROL_OFF = 0;
FLOW_CONTROL_RTS_CTS = 1;
FLOW_CONTROL_DSR_DTR = 2;
FLOW_CONTROL_XON_XOFF = 3;</code></pre>
<p>The command itself is a string which gets sent over RS232 using the connection
details.</p>
<h4>Android Intents</h4>
<p>Android display profiles can use the <code>intent</code> helper to specify an intent that should be called when the command executes.
The format of the command is <code>intent|&lt;type|activity,service,broadcast&gt;|&lt;activity&gt;|[&lt;extras&gt;]</code>.</p>
<p>Commands containing an intent helper are ignored in the Windows Player.</p>
<h2 id="monitor_on/off">Monitor ON/OFF <a href="#monitor_on/off" class="header-link"><span class="glyphicon glyphicon-link"></span></a></h2>
<h3>HDMI-CEC</h3>
<p>HDMI-CEC is a bus that is implemented on nearly all new large screen TVs that have HDMI connectors. This bus (which
is physically connected within normal HDMI cables) supports control signals that can perform power-on, power off,
volume adjust, selection of video source and many of the features that are accessible via the TV's remote control. It can
also control most other hardware on the HDMI bus.</p>
<p>Xibo doesn't provide a direct interface to HDMI-CEC as there are many different manufacturer specifications, however
it is possible to control HDMI-CEC via a batch file.</p>
<h3>Serial/RS232</h3>
<p>Industry grade monitors often have a serial interface for turning the monitor panel on and off. Xibo can use
the RS232 command helper to send these commands to the monitor - usually in HEX mode.</p>
<p>The following monitors and commands have been tested:</p>
<h4>NEC E464</h4>
<ul>
<li>Power On - <code>rs232|COM1,9600,8,None,One,None,1|01 30 41 30 41 30 43 02 43 32 30 33 44 36 30 30 30 31 03 73 0d</code></li>
<li>Power Off - <code>rs232|COM1,9600,8,None,One,None,1|01 30 41 30 41 30 43 02 43 32 30 33 44 36 30 30 30 34 03 76 0d</code></li>
</ul>
<h4>Sharp LC-42D69U</h4>
<ul>
<li>Power On - <code>rs232|COM1,9600,8,None,One,None,1|50 4F 57 52 31 20 20 20 0D</code></li>
<li>Power Off - <code>rs232|COM1,9600,8,None,One,None,1|50 4F 57 52 00 20 20 20 0D</code></li>
</ul>
<h4>LG 55LK520</h4>
<ul>
<li>Power On - <code>rs232|COM1,9600,8,None,One,None,1|6B 61 20 30 30 20 30 31 0D</code></li>
<li>Power Off - <code>rs232|COM1,9600,8,None,One,None,1|6B 61 20 30 30 20 30 30 0D</code></li>
</ul>
<p>It should be noted that other models of each brand should also use the same commands.</p>
                </div>
            </div>
        </div> <!-- container-->
        <footer class="ss_footer" role="contentinfo">
            <div class="container">
                <div class="pull-right">
                    <img class="img-responsive logo" src="../img/logo.png" alt="Xibo" />
                </div>

                <p class="ss_back_to_top">Back to Top</p>

                <p>Designed and built by <a href="http://springsignage.com/">Spring Signage</a> for the <a href="http://www.xibo.org.uk" target="_blank">Xibo Project</a>.</p>
                <p>Open Source Code licensed under <a href="" target="_blank">GNU Affero General Public License v3 or later</a>, documentation under <a rel="license" href="http://creativecommons.org/licenses/by-sa/2.0/uk/" target="_blank">Creative Commons Licence</a>.</p>

                <p class="ss_footer_links">Currently v1.8.4</p>

                <p class="ss_languages"><a href="../en/index.html">en</a> | <a href="../fr/index.html">fr</a></p>
            </div>
        </footer>

        <!-- JavaScript -->
        <script src="../vendor/jquery/jquery-1.9.1.js"></script>
        <script src="../vendor/bootstrap/js/bootstrap.min.js"></script>
        <script type="text/javascript">
            $(document).ready(function() {
                $(".ss_body img").addClass("img-thumbnail");
                $(".ss_body table").addClass("table");

                // Set the selected page based on the TOC name
                // Mark the appropriate top nav element as the selected page
                $("#side-nav a").each(function() {
                    if ($(this).data().tocName == $("body").data().toc)
                        $(this).parent().addClass("active");
                });

                $(".ss_back_to_top").click(function() {
                    $('html, body').animate({scrollTop : 0},800);
                });

                if (inIframe()) {
                    console.log("In Frame");
                    $("#top-nav").css("display", "none");
                    $(".ss-sidebar").parent().css("display", "none");
                }
            });

            function inIframe () {
                try {
                    return window.self !== window.top;
                } catch (e) {
                    return true;
                }
            }
        </script>
    </body>
</html>
