<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Xibo Documentation</title>
        <meta name="viewport" content="width=device-width">
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

        <!-- favicon -->
        <link href="../img/favicon.ico" rel="shortcut icon"/>

        <!-- Bootstrap -->
        <link href="../vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet" media="screen">
        
        <!-- Stylesheets -->
        <link href="../manual.css" rel="stylesheet" media="screen">
        
        <!-- META -->
        <meta name="keywords" content="digital signage, signage, narrow-casting, xibo, open source, agpl, documentation" />
        <meta name="description" content="Xibo is an open source digital signage solution. It supports all main media types and can be interfaced to other sources of data using CSV, Databases or RSS." />
    </head>
    <body data-toc="widgets">
        <!-- Copyright 2006-2013 Daniel Garner. Part of the Xibo Open Source Digital Signage Solution. Released under the AGPLv3 or later. -->
        <nav id="top-nav" class="navbar navbar-inverse navbar-fixed-top" role="navigation">
            <div class="container">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#ss-navbar">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a href="#" class="navbar-brand">Xibo Documentation</a>
                </div>
            
                <div class="collapse navbar-collapse" id="ss-navbar">
                    <ul class="nav navbar-nav">

                    </ul>
                </div>
            </div>
        </nav>

        <div class="ss_body container">
            <div class="row">
                <div class="col-md-3">
                    <ul id="side-nav" class="nav nav-pills nav-stacked">
                        <!-- <li><a href="index.html" data-toc-name="getting_started">Getting Started</a></li> -->
<li><a href="index.html" data-toc-name="tour">Tour</a></li><li><a href="displays.html" data-toc-name="displays">Displays</a></li><li><a href="layouts.html" data-toc-name="layouts">Layouts</a></li><li><a href="media.html" data-toc-name="widgets"> Library <span class="glyphicon glyphicon-arrow-left"></span> </a></li><!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body><ul>
<li><a href="media_modules.html">Modules</a></li>
<li><a href="media_module_audio.html">Audio</a></li>
<li><a href="media_module_clock.html">Clock</a></li>
<li><a href="media_module_currencies.html">Currencies</a></li>
<li><a href="media_module_dataset_view.html">DataSet View</a></li>
<li><a href="media_module_embedded.html">Embedded</a></li>
<li><a href="media_module_flash.html">Flash</a></li>
<li><a href="media_module_font.html">Font</a></li>
<li><a href="media_module_genericfile.html">Generic File</a></li>
<li><a href="media_module_image.html">Image</a></li>
<li><a href="media_module_localvideo.html">Local Video</a></li>
<li><a href="media_module_pdf.html">PDF</a></li>
<li><a href="media_module_powerpoint.html">PowerPoint</a></li>
<li><a href="media_module_shellcommand.html">Shell Command</a></li>
<li><a href="media_module_stocks.html">Stocks</a></li>
<li><a href="media_module_text.html">Text</a></li>
<li><a href="media_module_ticker.html">Ticker</a></li>
<li><a href="media_module_googletraffic.html">Google Traffic</a></li>
<li><a href="media_module_twitter.html">Twitter</a></li>
<li><a href="media_module_twitter_metro.html">Twitter Metro</a></li>
<li><a href="media_module_video.html">Video</a></li>
<li class="active"><a href="media_module_weather.html">Weather<span class="glyphicon glyphicon-arrow-left you-are-here-arrow"></span></a></li>
<li><a href="media_module_webpage.html">Web Page</a></li>
</ul></body></html>
<li><a href="scheduling.html" data-toc-name="scheduling">Scheduling</a></li><li><a href="users.html" data-toc-name="users">Users</a></li><li><a href="advanced.html" data-toc-name="advanced">Advanced</a></li>
                    </ul>
                </div>
                <div class="col-md-9" role="main">
                    <!--toc=widgets-->
<h1 id="weather">Weather <a href="#weather" class="header-link"><span class="glyphicon glyphicon-link"></span></a></h1>
<p>The Xibo weather widget provides current and daily weather forecasts worldwide.
It uses the <a href="https://darksky.net/">DarkSky API</a> as a source of weather data and a valid account
on this service is needed before usage.</p>
<p>If the CMS is hosted on the Spring Signage Xibo Cloud then the DarkSky API has been configured
and is provided as part of the service.</p>
<h2 id="installation">Installation <a href="#installation" class="header-link"><span class="glyphicon glyphicon-link"></span></a></h2>
<p>The module comes pre-installed on all 1.7 installations, but needs an API key
from <a href="https://darksky.net/">DarkSky API</a> to function correctly. This should be obtained by creating
an account and (if you will exceed 1000 calls per day) entering your billing information.</p>
<p>This configuration is entered in the Module Administration page by Editing the &quot;Forecast IO&quot; module.</p>
<p>There are two settings required:</p>
<ol>
<li>API Key</li>
<li>Cache Period</li>
</ol>
<p><img src="../en/img/media_forecast_installation.png" alt="Edit Form" /></p>
<h3>API Key</h3>
<p>The API key is obtained after <a href="https://darksky.net/">registering an application</a> on the
Forecast developer website.</p>
<p>The API Key identifies the Xibo CMS with Forecast and allows the CMS access to the weather data.</p>
<h3>Cache Period</h3>
<p>Forecast allow 1000 requests for a forecast per day before charging a small fee for each subsequent request.</p>
<p>The CMS allows a cache period to be specified which will create a delay between requests for each
geographic location.</p>
<h2 id="adding_to_a_layout">Adding to a Layout <a href="#adding_to_a_layout" class="header-link"><span class="glyphicon glyphicon-link"></span></a></h2>
<p>Weather data can be added to any layout and configured to use either a provided latitude / longitude,
or the displays latitude / longitude. If the displays latitude / longitude is selected the default global
location will be used in the preview.</p>
<p><img src="../en/img/media_forecast_add.png" alt="Adding to a Layout" /></p>
<p>You will also be asked to select a template to control how the Widget is presented. There are several
to choose from and a user designed template can be provided by selecting &quot;Override the Template&quot;.</p>
<h2 id="editing_the_default_templates">Editing the default templates <a href="#editing_the_default_templates" class="header-link"><span class="glyphicon glyphicon-link"></span></a></h2>
<p>Selecting a template on the General tab will automatically load that templates structure and
presentation in the Format tab. These can be edited and saved with each Layout.</p>
<p>There are 5 sections that need to be provided:</p>
<ol>
<li>
<p>Current Template</p>
<p>This is also known as the &quot;main&quot; template as it is used for the current weather conditions and as
the basis for the repeating daily template.</p>
</li>
<li>
<p>Daily Template</p>
<p>This is the repeating template that should be provided for the 7 day forecast. It will be repeated
for each day and then substituted into the special <code>[dailyForecast]</code> tag (which should feature on
the main template). The <code>[dailyForecast]</code> tag has 2 optional settings which can be added to the tag
by including the <code>|</code> character. These are <code>[dailyForecast|Number of days|Start day]</code> and default to
7 days, starting at tomorrow (day 2). If you wanted to see the next 3 days you would
use <code>[dailyForecast|3]</code>, for a 3 day forecast starting the day after tomorrow use <code>[dailyForecast|3|3]</code>.
A common example is to ignore the &quot;Current Template&quot; and produce a full 7 day forecast using the
daily forecast - this is achieved with <code>[dailyForecast|7|1]</code>.</p>
</li>
<li>
<p>CSS</p>
<p>This is the CSS to apply to the template structure above. It will be augmented with a colour
attribute and has a special <code>[[ICONS]]</code> which will be replaced with the selected icon sprite
(see section below).</p>
</li>
<li>
<p>Design Width</p>
<p>This is the intended width of the template and is used to scale the Widget within its region when
the template is applied.</p>
</li>
<li>
<p>Design Height</p>
<p>This is the intended height of the template and is used to scale the Widget within its region when
the template is applied.</p>
</li>
</ol>
<p>The template will be automatically scaled and should be designed for the intended output resolution. This
scaling means there are some guidelines that should be considered when editing templates:</p>
<ul>
<li>The template must be designed at a fixed size</li>
<li>All elements must use absolute sizing in px, including fonts, margins, widths, heights, etc</li>
<li>If positioning is used, it must be from top,left</li>
<li>Templates can use bootstrap</li>
<li>The aspect ratio will of the template will be fixed by Xibo and sized to fit the region</li>
<li>Templates are treated the same as a static image</li>
</ul>
<h3>Request a Forecast</h3>
<p>It is possible to &quot;request a forecast&quot; at any time to see what forecast data is returned. Any field
is available as a substitute in the template by entering the field name between square
brackets - for example [nearestStormDistance].</p>
<h3>Extending with new icons</h3>
<p>New icons can be added by a system administrator who has access to the file system. Any PNG file
in <code>modules/theme/forecastio/weather_icons</code> will be made available for selection in the Icons selector.</p>
<p>Weather icons are provided as a sprite, each icon is 128x128 and should represent the same weather
conditions as the shipped icon sprite.</p>
<p>For example, a &quot;clear-day&quot; is represented by the icon in position 1, a &quot;windy day&quot; is represented by the
icon in position 11.</p>
<h2 id="attribution">Attribution <a href="#attribution" class="header-link"><span class="glyphicon glyphicon-link"></span></a></h2>
<p>The DarkSky terms of service should be read and understood before using this module and all Widget
templates should include the text &quot;Powered by DarkSky&quot;.</p>
                </div>
            </div>
        </div> <!-- container-->
        <footer class="ss_footer" role="contentinfo">
            <div class="container">
                <div class="pull-right">
                    <img class="img-responsive logo" src="../img/logo.png" alt="Xibo" />
                </div>

                <p class="ss_back_to_top">Back to Top</p>

                <p>Designed and built by <a href="http://springsignage.com/">Spring Signage</a> for the <a href="http://www.xibo.org.uk" target="_blank">Xibo Project</a>.</p>
                <p>Open Source Code licensed under <a href="" target="_blank">GNU Affero General Public License v3 or later</a>, documentation under <a rel="license" href="http://creativecommons.org/licenses/by-sa/2.0/uk/" target="_blank">Creative Commons Licence</a>.</p>

                <p class="ss_footer_links">Currently v1.8.4</p>

                <p class="ss_languages"><a href="../en/index.html">en</a> | <a href="../fr/index.html">fr</a></p>
            </div>
        </footer>

        <!-- JavaScript -->
        <script src="../vendor/jquery/jquery-1.9.1.js"></script>
        <script src="../vendor/bootstrap/js/bootstrap.min.js"></script>
        <script type="text/javascript">
            $(document).ready(function() {
                $(".ss_body img").addClass("img-thumbnail");
                $(".ss_body table").addClass("table");

                // Set the selected page based on the TOC name
                // Mark the appropriate top nav element as the selected page
                $("#side-nav a").each(function() {
                    if ($(this).data().tocName == $("body").data().toc)
                        $(this).parent().addClass("active");
                });

                $(".ss_back_to_top").click(function() {
                    $('html, body').animate({scrollTop : 0},800);
                });

                if (inIframe()) {
                    console.log("In Frame");
                    $("#top-nav").css("display", "none");
                    $(".ss-sidebar").parent().css("display", "none");
                }
            });

            function inIframe () {
                try {
                    return window.self !== window.top;
                } catch (e) {
                    return true;
                }
            }
        </script>
    </body>
</html>
